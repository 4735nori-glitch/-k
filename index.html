<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰›ç›¸å ´ãƒ»ç®¡ç†ãƒ­ã‚°</title>
    <style>
        body { background-color: #2c3e50; color: white; font-family: sans-serif; text-align: center; padding: 20px; }
        .search-link { background: white; padding: 15px; border-radius: 10px; text-align: left; margin: 0 auto 20px auto; max-width: 400px; }
        .search-link a { text-decoration: none; color: #1a0dab; }
        .container { background: #34495e; padding: 20px; border-radius: 15px; display: inline-block; width: 350px; }
        input { width: 85%; padding: 10px; margin: 8px 0; border-radius: 5px; border: none; font-size: 16px; }
        .calc-box { background: #27ae60; padding: 10px; border-radius: 10px; margin: 10px 0; font-weight: bold; }
        button { background: #e67e22; color: white; border: none; padding: 12px 20px; border-radius: 5px; cursor: pointer; font-weight: bold; width: 90%; font-size: 18px; }
        #log-area { margin-top: 20px; text-align: left; background: #ecf0f1; color: #333; padding: 10px; border-radius: 10px; height: 200px; overflow-y: auto; }
        .log-item { border-bottom: 1px solid #ccc; padding: 8px 0; font-size: 13px; line-height: 1.4; }
        .price-tag { color: #c0392b; font-weight: bold; }
    </style>
</head>
<body>

    <div class="search-link">
        <a href="https://github.com/4735nori-glitch"><h3>ğŸ”— å·¥å ´é•·ã®è³‡æç½®ãå ´</h3></a>
    </div>

    <h1>ğŸ„ ç‰›ç›¸å ´è¨ˆç®—ãƒ­ã‚°</h1>
    
    <div class="container">
        <input type="text" id="cowName" placeholder="ç‰›ã®åå‰ãƒ»ç•ªå·">
        <input type="number" id="weight" placeholder="ä½“é‡ (kg)" oninput="calc()">
        <input type="number" id="unitPrice" placeholder="ã‚­ãƒ­å˜ä¾¡ (å††)" oninput="calc()">
        
        <div class="calc-box">
            äºˆæƒ³åˆè¨ˆé‡‘é¡: <span id="totalDisplay">0</span> å††
        </div>

        <button id="save-btn">ã“ã®ç›¸å ´ã§è¨˜éŒ²ï¼</button>
        
        <div id="log-area">
            <strong>ğŸ“Š éå»ã®ç›¸å ´ãƒ­ã‚°ï¼š</strong>
            <div id="log-list"></div>
        </div>
        <br>
        <button id="clear-btn" style="background:#c0392b; font-size:12px; width:auto;">å…¨æ¶ˆå»</button>
    </div>

    <script>
        const saveBtn = document.getElementById('save-btn');
        const clearBtn = document.getElementById('clear-btn');
        const list = document.getElementById('log-list');

        // è‡ªå‹•è¨ˆç®—æ©Ÿèƒ½
        function calc() {
            const w = document.getElementById('weight').value || 0;
            const u = document.getElementById('unitPrice').value || 0;
            const total = Math.floor(w * u);
            document.getElementById('totalDisplay').innerText = total.toLocaleString();
            return total;
        }

        window.onload = () => {
            const savedData = JSON.parse(localStorage.getItem('cowLogs')) || [];
            savedData.forEach(item => addToList(item));
        };

        saveBtn.addEventListener('click', () => {
            const name = document.getElementById('cowName').value;
            const weight = document.getElementById('weight').value;
            const unit = document.getElementById('unitPrice').value;
            const total = calc();

            if(!name || !weight || !unit) return alert("å…¨éƒ¨å…¥åŠ›ã—ã¦ãã‚Œï¼");

            const date = new Date().toLocaleDateString();
            const logEntry = `ã€${date}ã€‘ ${name} / ${weight}kg (å˜ä¾¡${unit}å††) â†’ <span class="price-tag">${total.toLocaleString()}å††</span>`;

            const savedData = JSON.parse(localStorage.getItem('cowLogs')) || [];
            savedData.push(logEntry);
            localStorage.setItem('cowLogs', JSON.stringify(savedData));

            addToList(logEntry);
            
            // å…¥åŠ›ãƒªã‚»ãƒƒãƒˆ
            document.getElementById('cowName').value = "";
            document.getElementById('weight').value = "";
            document.getElementById('unitPrice').value = "";
            document.getElementById('totalDisplay').innerText = "0";
        });

        function addToList(html) {
            const div = document.createElement('div');
            div.className = 'log-item';
            div.innerHTML = html;
            list.prepend(div);
        }

        clearBtn.addEventListener('click', () => {
            if(confirm("ãƒ‡ãƒ¼ã‚¿ã‚’å…¨ã¦æŠ¹æ¶ˆã™ã‚‹ã‹ï¼Ÿ")) {
                localStorage.clear();
                location.reload();
            }
        });
    </script>
</body>
</html>
